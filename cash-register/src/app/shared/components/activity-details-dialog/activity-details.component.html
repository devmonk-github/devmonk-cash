<div class="card shadow-sm">
    <div class="card-header" style="margin-top: 20px;">
        <h4>{{ 'ACTIVITY_DETAILS' | translate}}</h4>
        <div mat-dialog-actions>
            <button mat-dialog-close type="button" class="btn btn-sm btn-light" (click)="close(false)">
                <fa-icon [icon]="faTimes"></fa-icon>
            </button>
        </div>
    </div>
    <div class="card-body bg-light-gray">
        <div class="row">
            <div class="col-2"></div>
            <div class="col-10">
                <h4>Activities</h4>
            </div>
        </div>
        <div class="row">
            <div class="col-2">
                <div class="card m-0" style="width: 18rem;">
                    <span class="card-header justify-content-center align-items-center text-center fs-3 m-0">
                        <p>{{activity.sNumber}}</p>
                    </span>

                    <div class="card-body">

                        <div>
                            <button class="btn btn-primary" (click)="downloadReceipt()">
                                {{ 'DOWNLOAD' | translate }}
                            </button>
                        </div>
                        <div class="d-flex flex-wrap py-5">
                            <div class="flex-equal me-5">
                                Customer Details
                                <div class="fs-6 ms-1">
                                    <div class="align-items-center">
                                        <div class="text-gray-600">{{customer?.sFirstName || ''}} {{customer?.sLastName
                                            || ''}}
                                        </div>
                                    </div>
                                </div>
                                <div class="fs-6 ms-1">
                                    <div class="align-items-center">
                                        <div class="text-gray-600">{{customer?.sEmail || ''}}<a
                                                href="mailto:{{customer?.sEmail}}">
                                                <fa-icon [icon]="faEnvelope"></fa-icon>
                                            </a></div>
                                    </div>
                                </div>
                                <div class="fs-6 ms-1">
                                    <div class="align-items-center">
                                        {{'PHONE_MOBILE' | translate}}
                                        <span>{{customer?.oPhone?.sMobile}}
                                            <i class="fab fa-whatsapp ms-1" *ngIf="customer?.oPhone?.bWhatsApp"
                                                style="color: #1CB39B;"></i>
                                        </span>
                                    </div>
                                </div>
                                <div class="fs-6 ms-1">
                                    <div class="align-items-center">
                                        {{'PHONE_LANDLINE' | translate}}
                                        <span>{{customer?.oPhone?.sLandLine}}
                                        </span>
                                    </div>
                                </div>

                                <div class="fs-6 ms-1">
                                    <div class="align-items-center">
                                        {{'Advised by' | translate}}
                                        <span>{{customer?.oPhone?.sLandLine}}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-10">

                <div class="accordion" id="kt_accordion_1">
                    <div class="accordion-item" *ngFor="let activity of activityItems; index as index">
                        <h2 class="accordion-header">
                            <button class="accordion-button fs-4 fw-bold" (click)="collapsedBtn = !collapsedBtn"
                                type="button" data-bs-toggle="collapse" [ngClass]="{'collapsed': collapsedBtn }"
                                #accordionBtn>
                                <label>{{activity.sNumber}}</label>
                            </button>
                        </h2>
                        <div class="accordion-collapse collapse" data-bs-parent="accordion"
                            [ngClass]="{'show': collapsedBtn }">
                            <div class="accordion-body">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="form-group mb-6">
                                            <label class="form-control-label mb-3">Title {{ "NAME" | translate}}</label>
                                            <input class="form-control form-control-solid mb-3 mb-lg-0" type="text"
                                                name="activityName" [(ngModel)]="activity.sProductName">
                                        </div>
                                        <div class="form-group mb-6">
                                            <label class="form-control-label mb-3">{{ "DESCRIPTION" |
                                                translate}}</label>
                                            <textarea class="form-control form-control-solid" name="description"
                                                placeholder="{{ 'DESCRIPTION' | translate}}" lines="10"
                                                [(ngModel)]="activity.sDescription"></textarea>
                                        </div>

                                    </div>
                                    <div class="col-5">

                                        <div class="form-group mb-6">
                                            <label class="form-control-label mb-3">{{ "STATUS" | translate}}</label>
                                            <select name="status" id="status" class="form-control form-control-solid"
                                                [(ngModel)]="activity.eRepairStatus">
                                                <option *ngFor="let type of repairStatus" [value]="type">{{type}}
                                                </option>
                                            </select>
                                        </div>

                                        <div>
                                            Inform the customer that the product can be picked up.
                                        </div>
                                        <div class="border p-3 mb-5">
                                            <div class="border p-1 my-3 px-4">
                                                To be paid (excl. deposits/refunds/gold purchase/other fees)
                                            </div>
                                            <div class="row">
                                                <div class="col-8">
                                                    <input class="form-control form-control-solid w-100" type="text"
                                                        [(ngModel)]="activity.nTotalAmount">
                                                </div>
                                                <div class="col-4">
                                                    <button class="btn btn-primary">Mail customer</button>
                                                </div>
                                            </div>
                                            <div class="row mt-2">
                                                <div class="col-6">
                                                    Already paid: {{activity.nPaidAmount | currency: '€'}}
                                                </div>
                                                <div class="col-6">
                                                    Still to pay: {{(activity.nTotalAmount - activity.nPaidAmount) |
                                                    currency:
                                                    '€'}}
                                                </div>
                                            </div>
                                            <div class="mt-2">
                                                The advance payment could be spread over several products. Click on the
                                                receipt
                                                to see the total amount of the transaction, so you know for which item
                                                is
                                                paid.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-3 my-3">
                                        <div class="btn-group me-4 w-100 my-3">
                                            <span class="btn btn-primary fs-bold px-6"
                                                (click)="downloadCustomerReceipt(index)">
                                                <fa-icon class="mx-4" [icon]="faUser"></fa-icon>
                                                <span class="indicator-label ">{{ "CUSTOMER_RECEIPT"}}</span>
                                            </span>
                                            <span class="btn btn-primary btn-icon fs-bold" role="button">
                                                <div class="btn btn-icon" data-kt-menu-trigger="click"
                                                    data-kt-menu-attach="parent" data-kt-menu-placement="bottom-start"
                                                    data-kt-menu-flip="bottom">
                                                    <span class="svg-icon svg-icon-2 m-0">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                            viewBox="0 0 24 24" fill="none">
                                                            <path
                                                                d="M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z"
                                                                fill="black"></path>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-200px py-4"
                                                    data-kt-menu="true">
                                                    <div class="menu-item px-3 text-center">
                                                        <div class="menu-link px-3">tMenu</div>
                                                    </div>
                                                </div>
                                            </span>
                                        </div>
                                        <div class="btn-group me-4 w-100 my-3">
                                            <span class="btn btn-primary fs-bold px-6">
                                                <fa-icon class="mx-4" [icon]="faReceipt"></fa-icon>
                                                <span class="indicator-label">{{ "RECEIPT_PARTNER"}}</span>
                                            </span>
                                            <span class="btn btn-primary btn-icon fs-bold" role="button">
                                                <div class="btn btn-icon" data-kt-menu-trigger="click"
                                                    data-kt-menu-attach="parent" data-kt-menu-placement="bottom-start"
                                                    data-kt-menu-flip="bottom">
                                                    <span class="svg-icon svg-icon-2 m-0">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                            viewBox="0 0 24 24" fill="none">
                                                            <path
                                                                d="M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z"
                                                                fill="black"></path>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-200px py-4"
                                                    data-kt-menu="true">
                                                    <div class="menu-item px-3 text-center">
                                                        <div class="menu-link px-3">tMenu</div>
                                                    </div>
                                                </div>
                                            </span>
                                        </div>
                                        <div class="btn-group me-4 w-100 my-3">
                                            <span class="btn btn-primary fs-bold px-6">
                                                <span>
                                                    <fa-icon class="mx-4" [icon]="faReceipt"></fa-icon>
                                                </span>
                                                <span class="indicator-label">{{ "RECEIPT_FOR_BOTH"}}</span>
                                            </span>
                                            <span class="btn btn-primary btn-icon fs-bold" role="button">
                                                <div class="btn btn-icon" data-kt-menu-trigger="click"
                                                    data-kt-menu-attach="parent" data-kt-menu-placement="bottom-start"
                                                    data-kt-menu-flip="bottom">
                                                    <span class="svg-icon svg-icon-2 m-0">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                            viewBox="0 0 24 24" fill="none">
                                                            <path
                                                                d="M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z"
                                                                fill="black"></path>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-200px py-4"
                                                    data-kt-menu="true">
                                                    <div class="menu-item px-3 text-center">
                                                        <div class="menu-link px-3">tMenu</div>
                                                    </div>
                                                </div>
                                            </span>
                                        </div>
                                        <div class="btn-group me-4 w-100 my-3">
                                            <span class="btn btn-primary fs-bold px-6">
                                                <fa-icon class="mx-4" [icon]="faEnvelope"></fa-icon>
                                                <span class="indicator-label">{{ "MAIL"}}</span>
                                            </span>
                                        </div>
                                        <div class="btn-group me-4 w-100 my-3">
                                            <span class="btn btn-primary fs-bold px-6"
                                                (click)="loadCashRegister = true; openTransaction(activity, 'activity')">
                                                <fa-icon class="mx-4" [icon]="faEuro"></fa-icon>
                                                <span class="indicator-label">{{ "CHECKOUT"}}</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="activity.eRepairStatus === 'completed'"
                                    class="col-md-12 card-body d-flex flex-wrap py-5 border mt-5 mb-5 row">
                                    <div class="col-md-8">
                                        <div class="">
                                            <span>{{ "SHIPPING_METHOD" | translate }} : </span>
                                            <label class="form-control form-control-solid-solid">Standard
                                                Shipping</label>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>{{ "CARRIER" | translate}}</label>
                                            </div>
                                            <div class="col-md-6">
                                                <select name="career" id="career" class="form-select form-select-solid">
                                                    <option>PostNL</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <input type="text" class="form-control form-control-solid"
                                                placeholder="www.trackandtracelink.com">
                                        </div>
                                        <div class="row">
                                            <label>Only place the tracking code here</label>
                                        </div>
                                        <div class="row">
                                            <label>Open tracking link</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4 gap-5">
                                        <button class="btn btn-primary w-100 d-flex">
                                            <label class="mx-auto">Sent to customer</label>
                                        </button>
                                        <button class="btn btn-secondary w-100 d-flex">
                                            <label class="mx-auto">Ready to pik up</label>
                                        </button>
                                        <button class="btn btn-secondary w-100 d-flex">
                                            <label class="mx-auto">Deliver</label>
                                        </button>
                                        <button *ngIf="webOrders" class="btn btn-primary w-100 d-flex"
                                            (click)="openTransaction(activity, 'activity')">
                                            <label class="mx-auto">Open activity</label>
                                        </button>
                                    </div>
                                </div>

                                <div class="row my-5">
                                    <div class="col">
                                        <div class="form-group w-100">
                                            <input type="text" name="activityName" [(ngModel)]="activity.sProductName"
                                                class="form-control form-control-solid">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">

                                    <div class="col-5">
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Intake
                                                date</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.dCreatedDate" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Location</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.iLocationId" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Estimated date
                                                ready</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.dEstimatedDate" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Contact when
                                                ready</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        Intake date
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Estimated price
                                                upon ingestion</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.nPriceIncVat" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">To be paid
                                                (excl. deposits/refunds/gold purchse/other fees)</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.nPriceIncVat" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>




                                        <div class="table-responsive">
                                            <table
                                                class="table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer">
                                                <thead>
                                                    <tr
                                                        class="text-start text-gray-400 fw-bolder fs-7 text-uppercase gs-0">
                                                        <th>Receipt number</th>
                                                        <th>Created Date</th>
                                                        <th>Amount</th>
                                                        <ng-container *ngIf="from != 'transaction-details'">
                                                            <th>{{ 'ACTION' | translate }}</th>    
                                                        </ng-container>
                                                    </tr>
                                                </thead>
                                                <tbody class="fw-bold text-gray-600">
                                                    <tr *ngFor='let receipt of activity.receipts'>
                                                        <td>{{receipt.sTransactionNumber}}</td>
                                                        <td>{{receipt.dCreatedDate | date: 'medium'}}</td>
                                                        <td>{{receipt.nPaymentAmount | currency: '€'}}</td>
                                                        <ng-container *ngIf="from != 'transaction-details'">
                                                            <td>
                                                                <div class="d-flex align-items-center">
                                                                    <button class="btn btn-primary" (click)="showTransaction(receipt, $event)">
                                                                        {{ 'VIEW' | translate }}
                                                                    </button>
                                                                    <div *ngIf="receipt.bFetchingTransaction" class="spinner-border mx-2"></div>
                                                                </div>
                                                            </td>
                                                        </ng-container>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div *ngIf="!activity?.aImage?.length">
                                            No Images
                                        </div>
                                        <div class="d-flex">
                                            <div class="image-input p-1 d-flex"
                                                *ngFor="let image of activity.aImage; let i = index"
                                                data-kt-image-input="true"
                                                style="background-image: url('assets/media/svg/avatars/blank.svg')">
                                                <div class="image-input-wrapper w-100px h-100px"
                                                    style="background-image: url(assets/media/avatars/300-1.jpg)">
                                                    <img src={{image}} width="100px" height="100px">
                                                </div>
                                                <div class="mt-2 ">
                                                    <div data-kt-image-input-action="reorder" class="d-flex">
                                                        <button
                                                            class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
                                                            data-kt-image-input-action="remove" data-bs-toggle="tooltip"
                                                            title="Remove image">
                                                            <i class="bi bi-x fs-2"></i>
                                                        </button>
                                                    </div>

                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Brand</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.iBrandId" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Repair number</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.sBagNumber" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Costs incurred
                                                (excluding VAT)</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.nPriceIncVat" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Product category</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.iArticleGroupId" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Product material</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.iArticleGroupId" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-6">
                                            <label class="col-lg-4 col-form-label fw-bold fs-6">Supplier</label>
                                            <div class="col-lg-8">
                                                <div class="row">
                                                    <div class="col-lg-8 fv-row">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            [(ngModel)]="activity.iSupplierId" placeholder="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="row">

                                            <div class="fw-bold fs-6 my-2">
                                                I repair this myself
                                            </div>
                                            <div class="col">

                                                <div class="row mb-6">
                                                    <label class="col-lg-4 col-form-label fw-bold fs-6">{{ "REPAIRER" |
                                                        translate}}</label>
                                                    <div class="col-lg-8">
                                                        <div class="row ">
                                                            <div class="col-lg-8 fv-row">
                                                                <ng-select *ngIf="!employee" [(ngModel)]="employee"
                                                                    (search)="searchEmployees($event.term)"
                                                                    class="form-control form-control-solid p-0 w-100 custom"
                                                                    placeholder="Search employee" [minTermLength]="2"
                                                                    [clearable]="false"
                                                                    [isOpen]="filteredEmployees.length > 0"
                                                                    (change)="onEmployeeChange($event)">
                                                                    <ng-option *ngFor="let option of filteredEmployees"
                                                                        [value]="option">
                                                                        {{option.sName ||
                                                                        'Unknown'}}</ng-option>
                                                                </ng-select>
                                                                <div class="chip d-flex" *ngIf="employee">
                                                                    {{employee}}
                                                                    <div (click)="employee=null">
                                                                        &nbsp;<i
                                                                            class="close fas fa-times cursor-pointer"></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row my-4">
                                                            <div class="col-md-8 text-center">
                                                                <label>{{ "OR" | translate}}</label>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-8 fv-row">
                                                                <ng-select *ngIf="!supplier" [(ngModel)]="supplier"
                                                                    (search)="searchSuppliers($event.term)"
                                                                    class="form-control form-control-solid p-0 w-100 custom"
                                                                    placeholder="Search repairer" [minTermLength]="2"
                                                                    [clearable]="false"
                                                                    [isOpen]="supplierOptions.length > 0"
                                                                    (change)="onSupplierChange($event)">
                                                                    <ng-option *ngFor="let option of supplierOptions"
                                                                        [value]="option">
                                                                        {{option.sName ||
                                                                        'Unknown'}}</ng-option>
                                                                </ng-select>
                                                                <div class="chip d-flex" *ngIf="supplier">
                                                                    {{supplier}}
                                                                    <div (click)="supplier=null">
                                                                        &nbsp;<i
                                                                            class="close fas fa-times cursor-pointer"></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row mb-6">
                                                    <label class="col-lg-4 col-form-label fw-bold fs-6"><label
                                                            for="brand">{{ "BRAND" | translate}}</label></label>
                                                    <div class="col-lg-8">
                                                        <div class="row">
                                                            <div class="col-lg-8 fv-row">
                                                                <ng-select *ngIf="!brand" [(ngModel)]="brand"
                                                                    (search)="searchBrands($event.term)"
                                                                    class="form-control form-control-solid p-0 w-100 custom"
                                                                    placeholder="Search brand" [minTermLength]="2"
                                                                    [clearable]="false"
                                                                    [isOpen]="filteredBrands.length > 0"
                                                                    (change)="onBrandChange($event)">
                                                                    <ng-option *ngFor="let option of filteredBrands"
                                                                        [value]="option">
                                                                        {{option.sName ||
                                                                        'Unknown'}}</ng-option>
                                                                </ng-select>
                                                                <div class="chip d-flex" *ngIf="brand">
                                                                    {{brand}}
                                                                    <div (click)="brand=null">
                                                                        &nbsp;<i
                                                                            class="close fas fa-times cursor-pointer"></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>



                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <div class="row mb-6">
                                            <label class="col-lg-12 col-form-label fw-bold fs-6">{{
                                                "REMARK_FOR_SERVICE_PARTNERS" | translate}}</label>
                                            <div class="col-lg-12">
                                                <div class="row">
                                                    <div class="col-lg-12 fv-row">
                                                        <textarea
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            placeholder="{{ 'REMARK_FOR_SERVICE_PARTNERS' | translate}}"
                                                            lines="10"
                                                            [(ngModel)]="activity.sCommentVisibleServicePartner"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="row mb-6">
                                            <label class="col-lg-12 col-form-label fw-bold fs-6">{{
                                                "REMARK_FOR_COLLEAGUES" |
                                                translate}}</label>
                                            <div class="col-lg-12">
                                                <div class="row">
                                                    <div class="col-lg-12 fv-row">
                                                        <textarea
                                                            class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 w-100"
                                                            placeholder="{{ 'REMARK_FOR_SERVICE_PARTNERS' | translate}}"
                                                            lines="10"
                                                            [(ngModel)]="activity.sCommentVisibleCollegues"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex mt-100">
                    <h5 *ngIf='!activityItems.length && !loading' style="text-align: center">{{'NO_DATA_FOUND' |
                        translate }}
                    </h5>
                    <div *ngIf="loading" class="spinner-border mx-auto"></div>
                </div>
            </div>
        </div>

    </div>

    <div class="card-footer">
        <button class="btn btn-primary" (click)="submit()" type="submit">Submit</button>
    </div>
</div>