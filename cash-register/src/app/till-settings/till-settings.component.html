<div class="card mb-5 mb-xl-10 d-flex">
  <div class="card-header row">
    <div class="card-title">
      <div class="col-md-9">
        <span>{{ 'CASH_REGISTER' | translate}}</span>
      </div>
    </div>
  </div>
  <div class="card-body border-bottom">
    <div class="row">
      <div class="col-md-2">
        <label class="form-check form-switch form-check-custom form-check-solid">{{ 'BOOK_KEEPING_MODE' |
          translate}}</label>
      </div>
      <div class="col-md-1">
        <label class="form-check form-switch form-check-custom form-check-solid">
          <input type="checkbox" class="form-check-input" [(ngModel)]="bookKeepingMode"
            (click)="bookKeepingMode = !bookKeepingMode; updateBookkeepingSetting(bookKeepingMode)">
        </label>
      </div>
    </div>
    <div class="mt-3">
      <form name="thermalPrinterForm">
        <div class="row">
          <div class="col-6">
            <label for="line_n">{{"LAST_RECEIPT_NUMBER" | translate}}</label>
            <input type="number" id="line_n" name="line_n" class="form-control"
              [(ngModel)]="settings.nLastReceiptNumber"
              oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/^0[^.]/, '0');">
          </div>
          <div class="col-6">
            <label for="line_l">{{"LAST_INVOICE_NUMBER" | translate}}</label>
            <input type="number" id="line_l" name="line_l" class="form-control"
              [(ngModel)]="settings.nLastInvoiceNumber"
              oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/^0[^.]/, '0');">
          </div>
        </div>
        <button type="submit" class="btn btn-primary mt-4 float-end" (click)="updateSettings()">
          {{"SAVE" | translate}}
        </button>
      </form>
    </div>
  </div>

  <div class="card-body p-9">
    <div class="card-title fw-bold row">
      <div class="col-md-10">
        <span class="fw-bold">
          <h3>{{ 'PAYMENT_METHODS' | translate}}</h3>
        </span>
      </div>
      <div class="col-md-2">
        <button class="btn btn-primary float-end" (click)="createPaymentMethod()">{{ 'NEW' | translate}}</button>
      </div>
    </div>
    <div *ngIf="payMethods.length" class="dataTables_wrapper dt-bootstrap4 no-footer">
      <div class="table-responsive">
        <table class="table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer">
          <thead class="fw-bold">
            <tr>
              <div class="row">
                <div class="col-md-8 fw-bold">
                  <span>{{ 'NAME' | translate}}</span>
                </div>
                <div class="col-md-3">
                  <span *ngIf="bookKeepingMode">{{ 'LEDGER_NUMBER' | translate}}</span>
                </div>
                <div class="col-md-1">
                  <span>{{ 'DELETE' | translate}}</span>
                </div>
              </div>
            </tr>
          </thead>
          <tbody class="fw-bold">
            <tr *ngFor="let method of payMethods" class="bg-hover-secondary">
              <div class="row">
                <div class="col-md-8" (click)="viewDetails(method)">
                  <label>{{method.sName}}</label>
                </div>
                <div class="col-md-3">
                  <input type="number" *ngIf="bookKeepingMode" class="form-control form-control-solid"
                    [(ngModel)]="method.sLedgerNumber" (focusout)="updateLedgerNumber(method)" />
                </div>
                <div class="col-md-1 text-gray-500" (click)="deleteMethod(method)">
                  <fa-icon icon="trash"></fa-icon>
                </div>
              </div>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="d-flex">
      <h5 *ngIf='!payMethods.length && !payMethodsLoading'>{{ 'NO_DATA_FOUND' | translate}}</h5>
      <div *ngIf="payMethodsLoading" class="spinner-border mx-auto"></div>
    </div>
  </div>
</div>
<div class="card" *ngIf="bookKeepingMode">
  <div class="card-header row mt-4">
    <div class="col-md-4">
      <div class="d-flex align-items-center position-relative my-2">
        <span class="svg-icon svg-icon-4 position-absolute ms-4">
          <fa-icon icon="search"></fa-icon>
        </span>
        <input type="text" class="form-control form-control-solid w-250px ps-14" (value)="searchValue"
          [(ngModel)]="searchValue" (change)="getGeneralLedgerNumber()" placeholder="SEARCH">
        <button class="btn btn-primary ms-xl-1" title="{{'RELOAD_THIS_PAGE' | translate}}">
          <fa-icon icon="sync"></fa-icon>
        </button>
      </div>
    </div>
    <div class="col-md-8"></div>
  </div>
  <div class="card-body pt-0">
    <table class="table-fixed w-100">
      <thead>
        <tr>
          <th class="border border-green-100 p-4" *ngFor="let column of overviewColumns">
            <span *ngIf="column.name !== 'action'">{{ column.name | translate }}</span>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let column of bookKeepings; let i = index" class="fw-bold border border-green-100 p-4">
          <td class="border border-green-100 p-4">
            <span>{{column.sDescription | translate }}</span>
          </td>
          <td class="border border-green-100 p-4">
            <input type="number" *ngIf="bookKeepingMode" class="form-control form-control-solid"
              [(ngModel)]="column.nNumber" (focusout)="updateGeneralLedgerNumber(column)" />
          </td>
      </tbody>
    </table>
  </div>
  <div class="d-flex">
    <h5 *ngIf='!bookKeepings.length && !loading'>{{ 'NO_DATA_FOUND' | translate}}</h5>
    <div *ngIf="loading" class="spinner-border mx-auto"></div>
  </div>
</div>
